@model MISPortal.Models.InvestmentDetails
@{
    ViewBag.Title = "Step3";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm("AddEditInvestmentDetailApplicant", "Applicant", FormMethod.Post, new { role = "form" }))
{
    @Html.HiddenFor(m=>m.IDL[0]._InvestmentDetailsID)
    @Html.HiddenFor(m => m.IDL[1]._InvestmentDetailsID)
    @Html.HiddenFor(m => m.IDL[2]._InvestmentDetailsID)
    @Html.HiddenFor(m => m.IDL[3]._InvestmentDetailsID)
    @Html.HiddenFor(m=>m.PM[0]._PaymentMethodID)
    @Html.HiddenFor(m => m.PM[1]._PaymentMethodID)
    
    
<section id="div_InvestmentDelt" class="CWSF_joint02 t-banner-5">
        <div class="graymatter_03">
            <div class="container">
                <div class="row">   
                
                <div class="CWSF_trsteentyp01">
                    <h1>Investment Details</h1>
                    <p>Please complete your Investment Selection details below</p>
                </div>
                @*<table cellpadding="10" style="width:100%;">
                    <thead>
                        <tr>
                            <th>Fund</th>
                            <th>Minimum Initial Investment</th>
                            <th>Minimum Additional<br />
                                Investment</th>
                            <th>Minimum Months Investment<br />
                                [Regular Savings Plan]</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="center">
                            <td>Crescent Australian Equity Fund</td>
                            <td>$5.000</td>
                            <td>$500</td>
                            <td>na</td>
                        </tr>
                        <tr align="center">
                            <td>Crescent Islamic Cash Management Fund</td>
                            <td>$5.000</td>
                            <td>$500</td>
                            <td>$100</td>
                        </tr>
                        <tr align="center">
                            <td>Crescent International Equity Fund</td>
                            <td>$5.000</td>
                            <td>$500</td>
                            <td>na</td>
                        </tr>
                        <tr align="center">
                            <td>Crescent Diversified Property Fund</td>
                            <td>$5.000</td>
                            <td>$500</td>
                            <td>na</td>
                        </tr>
                    </tbody>
                </table>*@
    
                <table cellpadding="10" style="width:100%;">
                    <thead>
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th colspan="3">Where will your<br />Distribution Income go?</th>
                        </tr>
                        <tr>
                            <th>Fund name</th>
                            <th>Investment amount</th>
                            <th>Regular Savings Plan*<br />$ per month</th>
                            <th>Reinvest in<br />the Fund(x)</th>
                            <th></th>
                            <th>Deposit into<br /> nominated<br /> financial institution<br />account(x)**
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="center">
                            <td>Crescent Australian Equity Fund
                                @Html.HiddenFor(m => m.IDL[0]._FundName, new { Value = "Crescent Australian Equity Fund" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[0]._InvestmentAmount, new { @onfocusout = "this.value = minmax(this.value, 5000, 0);", @onkeyup = "changeAmountColor('#inv1',this.value,'5000');", @placeholder = "Min $5000", id = "inv1" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[0]._RegularSavingPlanPerMonth, new { placeholder = "n/a", disabled = "disabled" })
                            </td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[0]._Reinvest, true, new { })
                            </td>
                            <td>OR</td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[0]._Reinvest, false, new { })
                            </td>
                        </tr>
                        <tr align="center">
                            <td>Crescent Islamic Cash Management Fund
                                @Html.HiddenFor(m => m.IDL[1]._FundName, new { Value = "Crescent Islamic Cash Management Fund" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[1]._InvestmentAmount, new { @onfocusout = "this.value = minmax(this.value, 5000, 0);", @onkeyup = "changeAmountColor('#inv2',this.value,'5000');", @placeholder = "Min $5000", id = "inv2" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[1]._RegularSavingPlanPerMonth, new { @onfocusout = "this.value = minmax(this.value, 100, 0);", @onkeyup = "changeAmountColor('#rsp2',this.value,'100');", @placeholder = "Min $100", id = "rsp2" })
                            </td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[1]._Reinvest, true, new { })
                            </td>
                            <td>OR</td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[1]._Reinvest, false, new { })
                            </td>
                        </tr>
                        <tr align="center">
                            <td>Crescent International Equity Fund
                                @Html.HiddenFor(m => m.IDL[2]._FundName, new { Value = "Crescent International Equity Fund" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[2]._InvestmentAmount, new { @onfocusout = "this.value = minmax(this.value, 5000, 0);", @onkeyup = "changeAmountColor('#inv3',this.value,'5000');", @placeholder = "Min $5000", id = "inv3" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[2]._RegularSavingPlanPerMonth, new { placeholder = "n/a", disabled = "disabled" })
                            </td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[2]._Reinvest, true, new { })
                            </td>
                            <td>OR</td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[2]._Reinvest, false, new { })
                            </td>
                        </tr>
                        <tr align="center">
                            <td>Crescent Diversified Property Fund
                                @Html.HiddenFor(m => m.IDL[3]._FundName, new { Value = "Crescent Diversified Property Fund" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[3]._InvestmentAmount, new { @onfocusout = "this.value = minmax(this.value, 5000, 0);", @onkeyup = "changeAmountColor('#inv4',this.value,'5000');", @placeholder = "Min $5000", id = "inv4" })
                            </td>
                            <td>
                                A$@Html.TextBoxFor(m => m.IDL[3]._RegularSavingPlanPerMonth, new { placeholder = "n/a", disabled = "disabled" })
                            </td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[3]._Reinvest, true, new { })
                            </td>
                            <td>OR</td>
                            <td>
                                @Html.RadioButtonFor(m => m.IDL[3]._Reinvest, false, new { })
                            </td>
                        </tr>
                    </tbody>
                </table>
    
                <p style="color:Red;">
                *If you nominate an amount for the Regular Savings Plans you must also complete the Direct Debit Request.<br />
                <b>**If you would like your distribution income to be deposited into a nominated financial institution account, please provide details in Direct Credit/EFT.</b>
                </p>
                 <div align="center">
                    <input type="button" id="anchor31" class="btn btn-primary btn-oval btn-large" value=" Next " />
                </div>
            </div>
        </div>
    </div>
</section>    
    
       
 <!--
===============================================================
 Payment Method
===============================================================
-->    

<section id="div_pm" class="CWSF_joint02 CWSF_memapp_shadedradio">
        <div class="graymatter_03">
            <div class="container">
                <div class="row">     
                    <div class="ind_td_nar mar-lt-300">    
    
                    <h2>Payment Method</h2>
    
                    <p>Please select your payment method and complete the relevant section if applicable. All payment must be in Australian dollars.</p><br />
                    @Html.RadioButtonFor(m => m.PM[0]._PaymentType, "Cheque", new { @onclick = "ShowHideElement('no',true)", @checked = "checked" })<b>Cheque</b><br />
                    <p>Please make cheque payable to 'Crescent Funds Management (Aust) Ltd ATF Crescent Wealth'.</p>
                    <p style="color:Black;">
                    <b>Cheque Address:</b>

                    Crescent Wealth Managed Funds<br />
                    c/o FundBPO Pty Ltd<br />
                    GPO Box 4968<br />
                    Sydney NSW 2001<br />
                    </p>
                    @Html.RadioButtonFor(m => m.PM[0]._PaymentType, "DirectDebit", new { id="DirectDebit" })<b>Direct debit</b><br />
                    <p>Please complete the Direct Debit Request.</p><br />
                    @Html.RadioButtonFor(m => m.PM[0]._PaymentType, "DirectCreditEFT", new { id="DirectCreditEFT" })<b>Direct credit/EFT</b><br />
    
                    </div>
                </div>
            </div>
        </div>
    </section>
    
     
    <section id="div_DirectDebit" class="CWSF_joint02 t-banner-5" style="display:none;">
        <div class="graymatter_03">
            <div class="container">
                <div class="row">     
                    <div class="ind_td_nar mar-lt-300">  
   
                        <h1>Direct Debit</h1>
                        
                        @Html.TextBoxFor(m => m.PM[0]._FinancialInstituteName, new { @class = "fnl_txtbx_fl", placeholder = "Financial Institute Name" })<br />
                        @Html.TextBoxFor(m => m.PM[0]._BranchName, new { @class = "fnl_txtbx_fl", placeholder = "Branch Name" })<br />
                        @Html.TextBoxFor(m => m.PM[0]._BSBNumber, new { @class = "fnl_txtbx_suburb", placeholder = "BSB Number" })
                        @Html.TextBoxFor(m => m.PM[0]._AccountNumber, new { @class = "fnl_txtbx_smee", placeholder = "Account Number" })
                        @Html.TextBoxFor(m => m.PM[0]._AccountName, new { @class = "fnl_txtbx_smee", placeholder = "Account Name" })

                        <p>I/We request and authorise Crescent Funds Management (Aust) Ltd to arrange for the amount(s) specified above to be debited from the financial institution account nominated above through the Bulk Electronic Clearing System.</p><br />
   
                    </div>
                </div>
            </div>
        </div>
    </section>   
    
    
    <section id="div_DirectCreditEFT" class="CWSF_joint02 t-banner-2" style="display:none;">
        <div class="graymatter_03">
            <div class="container">
                <div class="row">     
                    <div class="ind_td_nar mar-lt-300"> 

                    <h1>Direct Credit/EFT</h1>
                    <h2>Financial Institution Account Details</h2>

                    <p>Please note, you can only nominate an Australian financial institution account that is held in the name(s) of the Investor(s). Payments to third party accounts will <ins><b>not</b></ins> be made.</p>

                        @Html.TextBoxFor(m => m.PM[1]._FinancialInstituteName, new { @class = "fnl_txtbx_fl", placeholder = "Financial Institute Name" })<br />
                        @Html.TextBoxFor(m => m.PM[1]._BranchName, new { @class = "fnl_txtbx_fl", placeholder = "Branch Name" })<br />
                        @Html.TextBoxFor(m => m.PM[1]._BSBNumber, new { @class = "fnl_txtbx_suburb", placeholder = "BSB Number" })
                        @Html.TextBoxFor(m => m.PM[1]._AccountNumber, new { @class = "fnl_txtbx_smee", placeholder = "Account Number" })
                        @Html.TextBoxFor(m => m.PM[1]._AccountName, new { @class = "fnl_txtbx_smee", placeholder = "Account Name" })
    
                    </div>
                </div>
            </div>
        </div>
    </section> 
    
    <section id="" class="CWSF_memapp_shadedradio">
        <div class="graymatter_03">
            <div class="container">
                <div class="row">     
                    <div class="ind_td_nar mar-lt-300"> 
                        <input type="button" value=" Next Step " class="btn btn-primary btn-oval btn-large" onclick="checkInv();"/>
                        <input type="submit" style="display:none;" id="submitForm" />
                    </div>
                </div>
            </div>
        </div>  
    </section>
}




<script type="text/javascript">
    function ShowHideElement(id, action) {
        if (action == true) {
            $("#" + id).show('fast');
            var pms = ["div_DirectDebit", "div_DirectCreditEFT"];
            for (index = pms.length - 1; index >= 0; --index) {
                if (pms[index] != id) {
                    $("#" + pms[index]).hide('fast');
                }
            }
        }
    }
    
    function minmax(value, min, max) {
        if (parseInt(value) < min || isNaN(value)) {
            alert('Must be greater than ' + min);
            return "";
        }
        else if (parseInt(value) > max)
            return value;
        else return value;
    }
    function checkaltestinvestment() {
        if ($("#inv1").val() == "" && $("#inv2").val() == "" && $("#inv3").val() == "" && $("#inv4").val() == "") {
            return false;
        } else return true;
    }
    function checkInv() {
        var b = checkaltestinvestment();
        if (b == false) {
            alert('atleast one investment required!');
        } else {
        $('#submitForm').click();
        }
    }
    function changeAmountColor(id, thisvalue, minvalue) {
        if (parseInt(thisvalue) < parseInt(minvalue)) {
            $(id).css('color', 'red');
        } else {
            $(id).css('color', 'gray');
        }
    }

    $("#anchor31").click(function () {
        if (checkaltestinvestment() == true) {
            $('html, body').animate({
                scrollTop: $("#div_pm").offset().top
            }, 1500);
        }
        else { alert('atleast one investment required!'); }
    });

    $("#DirectDebit").click(function () {
        ShowHideElement('div_DirectDebit', true);
        $('html, body').animate({
            scrollTop: $("#div_DirectDebit").offset().top
        }, 1500);
    });
    $("#DirectCreditEFT").click(function () {
        ShowHideElement('div_DirectCreditEFT', true);
        $('html, body').animate({
            scrollTop: $("#div_DirectDebit").offset().top
        }, 1500);
    });

    $(document).ready(function () {
        $("#progAT").addClass("visited first");
        $("#progIV").addClass("previous visited");
        $("#progIP").addClass("active");
        $("#progAF").addClass("next");
        $("#progRC").addClass("");
        $("#progC").addClass("");
    });
</script>